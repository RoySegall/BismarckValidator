language: python
python: 3.6
addons:
  rethinkdb: "2.3"

install:
  - pip install pycodestyle flake8 isort
  - pip install -r requirements.txt
  - pip install -U pytest

before_script:
  - service rethinkdb stop
  - rethinkdb --http-port 8090

script:
  # todo: use flake8
  - pycodestyle --show-source --max-line-length=120 --show-pep8 .

  # Running flask in the background.
  - FLASK_APP=app.py FLASK_DEBUG=1 flask run --port 8080 > /dev/null 2>&1 &

  # Running some tests.
  - pytest TestsBismarkReport.py
  - pytest TestsFlask.py
  - pytest TestsPlugins.py
  - pytest TestsRosetta.py
